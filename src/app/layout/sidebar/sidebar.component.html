<!-- src/app/layout/sidebar/sidebar.component.html -->
<div class="sidebar" [class.sidebar--collapsed]="isCollapsed()">
  <div class="sidebar__content">
    <nav class="sidebar__nav">
      <ul class="sidebar__list">
        <li class="sidebar__item sidebar__top">
          <a routerLink="/dashboard" routerLinkActive="sidebar__link--active" class="sidebar__link">
            <span class="icon-home sidebar__icon">
              <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 14.667V8h4v6.667M2 6l6-4.667L14 6v7.333a1.334 1.334 0 0 1-1.333 1.334H3.333A1.334 1.334 0 0 1 2 13.333V6Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </span>
            <span class="sidebar__link-text">Dashboard</span>
          </a>
          <button class="sidebar__toggle" (click)="toggleSidebar()">
            <span class="icon-collapse sidebar__icon" [class.sidebar__icon--rotated]="isCollapsed()">
              <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 2v12m4.667-4-2-2 2-2M3.333 2h9.334C13.403 2 14 2.597 14 3.333v9.334c0 .736-.597 1.333-1.333 1.333H3.333A1.333 1.333 0 0 1 2 12.667V3.333C2 2.597 2.597 2 3.333 2Z" stroke="#232323" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </span>
          </button>
        </li>

        <li class="sidebar__section">
          <h2 class="sidebar__section-title">Inquiry hub</h2>
          <ul class="sidebar__sub-list">
            <li class="sidebar__item">
              <a routerLink="/shop" routerLinkActive="sidebar__link--active" class="sidebar__link">
                <span class="icon-shop sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="m1.333 4.667 2.94-2.94a1.333 1.333 0 0 1 .947-.394h5.56a1.334 1.334 0 0 1 .947.394l2.94 2.94m-13.334 0h13.334m-13.334 0v2A1.333 1.333 0 0 0 2.667 8m12-3.333v2A1.333 1.333 0 0 1 13.333 8M2.667 8v5.333A1.333 1.333 0 0 0 4 14.667h8a1.333 1.333 0 0 0 1.333-1.334V8M2.667 8a1.8 1.8 0 0 0 1.06-.42.467.467 0 0 1 .546 0 1.8 1.8 0 0 0 1.06.42 1.8 1.8 0 0 0 1.06-.42.467.467 0 0 1 .547 0A1.8 1.8 0 0 0 8 8a1.8 1.8 0 0 0 1.06-.42.467.467 0 0 1 .547 0 1.8 1.8 0 0 0 1.06.42 1.8 1.8 0 0 0 1.06-.42.467.467 0 0 1 .546 0 1.8 1.8 0 0 0 1.06.42M10 14.667V12a1.333 1.333 0 0 0-1.333-1.333H7.333A1.333 1.333 0 0 0 6 12v2.667" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
                </span>
                <span class="sidebar__link-text">Shop</span>
              </a>
            </li>
            <li class="sidebar__item">
              <a routerLink="/manual-entry/input-form" routerLinkActive="sidebar__link--active" class="sidebar__link">
                <span class="icon-manual-entry sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 10v2.667A1.334 1.334 0 0 1 12.667 14H3.333A1.334 1.334 0 0 1 2 12.667V10m9.333-4.667L8 2m0 0L4.667 5.333M8 2v8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <span class="sidebar__link-text">Manual entry</span>
              </a>
            </li>
            <li class="sidebar__item">
              <a routerLink="/inquiry-tool" routerLinkActive="sidebar__link--active" class="sidebar__link sidebar__link--disabled">
                <span class="icon-inquiry-tool sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M8.667 4.667 5.8 1.8a1.607 1.607 0 0 0-2.267 0L1.8 3.533a1.607 1.607 0 0 0 0 2.267l2.867 2.867M5.333 4l1.334-1.333m5.333 8 1.333-1.334m-2-2L14.2 10.2c.627.627.627 1.64 0 2.267L12.467 14.2a1.602 1.602 0 0 1-2.267 0l-2.867-2.867m2.667-8L12.667 6m1.449-1.459a1.88 1.88 0 0 0-2.657-2.658l-8.898 8.9c-.155.154-.269.344-.333.553l-.88 2.901a.334.334 0 0 0 .415.415l2.902-.88c.208-.063.398-.177.553-.331l8.898-8.9Z"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
                </span>
                <span class="sidebar__link-text">Inquiry Tool</span>
              </a>
            </li>
            <li class="sidebar__item">
              <button class="sidebar__link sidebar__submenu-toggle">
                <span class="icon-folder sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.333 13.333A1.333 1.333 0 0 0 14.667 12V5.333A1.333 1.333 0 0 0 13.333 4H8.067a1.333 1.333 0 0 1-1.127-.6l-.54-.8A1.333 1.333 0 0 0 5.287 2h-2.62a1.333 1.333 0 0 0-1.334 1.333V12a1.333 1.333 0 0 0 1.334 1.333h10.666Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <span class="sidebar__link-text">My Inquiries</span>
              </button>
              <ul class="sidebar__nested-list">
                <li class="sidebar__item sidebar__item--indented">
                  <a routerLink="/my-inquiries/active" routerLinkActive="sidebar__submenu-link--active" class="sidebar__link sidebar__link--submenu">
                    <span class="icon-active sidebar__icon">
                      <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 6v2.667m0 2.666h.007m1.993-10H4a1.333 1.333 0 0 0-1.333 1.334v10.666A1.333 1.333 0 0 0 4 14.667h8a1.333 1.333 0 0 0 1.333-1.334V4.667L10 1.333Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </span>
                    <span class="sidebar__link-text">Active</span>
                  </a>
                </li>
                <li class="sidebar__item sidebar__item--indented">
                  <a routerLink="/my-inquiries/history" routerLinkActive="sidebar__submenu-link--active" class="sidebar__link sidebar__link--submenu">
                    <span class="icon-history sidebar__icon">
                      <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.333 1.333V4a1.333 1.333 0 0 0 1.334 1.333h2.666M6 10l1.333 1.333L10 8.667m0-7.334H4a1.333 1.333 0 0 0-1.333 1.334v10.666A1.333 1.333 0 0 0 4 14.667h8a1.333 1.333 0 0 0 1.333-1.334V4.667L10 1.333Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </span>
                    <span class="sidebar__link-text">History</span>
                  </a>
                </li>
                <li class="sidebar__item sidebar__item--indented">
                  <a routerLink="/my-inquiries/drafts" routerLinkActive="sidebar__submenu-link--active" class="sidebar__link sidebar__link--submenu">
                    <span class="icon-history sidebar__icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8.33329 14.6667H12C12.3536 14.6667 12.6927 14.5262 12.9428 14.2762C13.1928 14.0261 13.3333 13.687 13.3333 13.3333V4.66668L9.99996 1.33334H3.99996C3.64634 1.33334 3.3072 1.47382 3.05715 1.72387C2.8071 1.97392 2.66663 2.31305 2.66663 2.66668V9.00001M9.33329 1.33334V4.00001C9.33329 4.35363 9.47377 4.69277 9.72382 4.94282C9.97387 5.19287 10.313 5.33334 10.6666 5.33334H13.3333M8.91861 10.4173C9.05011 10.2858 9.15442 10.1297 9.22558 9.95786C9.29675 9.78606 9.33338 9.60191 9.33338 9.41595C9.33338 9.22998 9.29675 9.04584 9.22558 8.87403C9.15442 8.70222 9.05011 8.54611 8.91861 8.41461C8.78711 8.28312 8.631 8.17881 8.45919 8.10764C8.28739 8.03648 8.10324 7.99985 7.91728 7.99985C7.73131 7.99985 7.54717 8.03648 7.37536 8.10764C7.20355 8.17881 7.04744 8.28312 6.91594 8.41461L3.57594 11.7559C3.41744 11.9144 3.30142 12.1102 3.23861 12.3253L2.68061 14.2386C2.66388 14.296 2.66288 14.3568 2.67771 14.4147C2.69254 14.4726 2.72265 14.5254 2.76491 14.5676C2.80716 14.6099 2.86 14.64 2.91788 14.6549C2.97577 14.6697 3.03658 14.6687 3.09394 14.6519L5.00728 14.0939C5.22239 14.0311 5.4182 13.9151 5.57661 13.7566L8.91861 10.4173Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </span>
                    <span class="sidebar__link-text">Drafts</span>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </li>

        <li class="sidebar__section">
          <h2 class="sidebar__section-title">Machine hub</h2>
          <ul class="sidebar__sub-list">
            <li class="sidebar__item">
              <a routerLink="/my-machines" routerLinkActive="sidebar__link--active" class="sidebar__link sidebar__link--disabled">
                <span class="icon-machine sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.333V2.667H5.333m-4 6.666h1.334m10.666 0h1.334M10 8.667V10M6 8.667V10M4 5.333h8c.736 0 1.333.597 1.333 1.334V12c0 .736-.597 1.333-1.333 1.333H4A1.333 1.333 0 0 1 2.667 12V6.667c0-.737.597-1.334 1.333-1.334Z" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <span class="sidebar__link-text">My Machines</span>
              </a>
            </li>
            <li class="sidebar__item">
              <a routerLink="/all-machines" routerLinkActive="sidebar__link--active" class="sidebar__link">
                <span class="icon-view-all sidebar__icon">
                  <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.333 2.667H14M9.333 6H14m-4.667 4H14m-4.667 3.333H14M2.667 2H6c.368 0 .667.298.667.667V6A.667.667 0 0 1 6 6.667H2.667A.667.667 0 0 1 2 6V2.667C2 2.298 2.298 2 2.667 2Zm0 7.333H6c.368 0 .667.299.667.667v3.333A.667.667 0 0 1 6 14H2.667A.667.667 0 0 1 2 13.333V10c0-.368.298-.667.667-.667Z" stroke="#232323" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </span>
                <span class="sidebar__link-text">View All Machines</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>

    <div class="sidebar__footer">
      <ul class="sidebar__list">
        <li class="sidebar__item">
          <a (click)="openSupportModal($event)" routerLink="/support" routerLinkActive="sidebar__link--active" class="sidebar__link">
            <span class="icon-support sidebar__icon">
              <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="m3.287 3.287 2.826 2.826m3.774 0 2.826-2.826m-2.826 6.6 2.826 2.826m-6.6-2.826-2.826 2.826M14.667 8A6.667 6.667 0 1 1 1.333 8a6.667 6.667 0 0 1 13.334 0Zm-4 0a2.667 2.667 0 1 1-5.334 0 2.667 2.667 0 0 1 5.334 0Z" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
            </span>
            <span class="sidebar__link-text">Support</span>
          </a>
        </li>
        <li class="sidebar__item">
          <a routerLink="/documentation" routerLinkActive="sidebar__link--active" class="sidebar__link sidebar__link--disabled">
            <span class="icon-documentation sidebar__icon">
              <svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 4.667A2.667 2.667 0 0 0 5.333 2h-4v10H6a2 2 0 0 1 2 2m0-9.333V14m0-9.333A2.667 2.667 0 0 1 10.667 2h4v10H10a2 2 0 0 0-2 2" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </span>
            <span class="sidebar__link-text">Documentation</span>
          </a>
        </li>
        <li class="sidebar__divider"></li>
        @if (authService.isAuthenticated()) {
          <li class="sidebar__item">
            <div class="sidebar__user">
              <div class="sidebar__user-row" (click)="toggleUserDropdown($event)" role="button">
                <span class="icon-user sidebar__icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M12.6667 14V12.6667C12.6667 11.9594 12.3857 11.2811 11.8856 10.781C11.3855 10.281 10.7072 10 10 10H6C5.29275 10 4.61448 10.281 4.11438 10.781C3.61428 11.2811 3.33333 11.9594 3.33333 12.6667V14M10.6667 4.66667C10.6667 6.13943 9.47276 7.33333 8 7.33333C6.52724 7.33333 5.33333 6.13943 5.33333 4.66667C5.33333 3.19391 6.52724 2 8 2C9.47276 2 10.6667 3.19391 10.6667 4.66667Z" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
                <div class="sidebar__user-info">
                  <span class="sidebar__user-name">{{ userFullName }}</span>
                  <span class="sidebar__user-role">{{ userRole }}</span>
                </div>
                <span class="sidebar__user-icon-arrow" [class.sidebar__user-icon-arrow--rotated]="isUserDropdownOpen()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M4 6L8 10L12 6" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </div>

              @if (isUserDropdownOpen()) {
                <div class="sidebar__user-dropdown" @fadeInOut>
                  <div class="sidebar__user-switch-user" role="button" (click)="openLoginModal()">
                    <span>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M14 8C14 6.4087 13.3679 4.88258 12.2426 3.75736C11.1174 2.63214 9.5913 2 8 2C6.32263 2.00631 4.71265 2.66082 3.50667 3.82667L2 5.33333M2 5.33333V2M2 5.33333H5.33333M2 8C2 9.5913 2.63214 11.1174 3.75736 12.2426C4.88258 13.3679 6.4087 14 8 14C9.67737 13.9937 11.2874 13.3392 12.4933 12.1733L14 10.6667M14 10.6667H10.6667M14 10.6667V14" stroke="#09090B" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </span>
                    Switch user
                  </div>
                  <div class="sidebar__user-logout" (click)="logout()" role="button">
                    <span>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M6 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H6M10.6667 11.3333L14 8M14 8L10.6667 4.66667M14 8H6" stroke="#09090B" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </span>
                    Logout
                  </div>
                </div>
              }
            </div>
          </li>
        }
      </ul>
    </div>
  </div>
</div>

<!-- Login Modal -->
<app-login-modal
  [isOpen]="isLoginModalOpen()"
  (isOpenChange)="loginModalService.close()"
  (loginSuccess)="onLoginSuccess()">
</app-login-modal>

<!-- Support Modal -->
<app-support-modal
  [isOpen]="isSupportModalOpen()"
  (isOpenChange)="supportModalService.close()">
</app-support-modal>
