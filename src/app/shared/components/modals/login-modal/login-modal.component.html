<div *ngIf="isOpen && !authService.isAuthenticated()" class="modal-overlay" (click)="closeOnBackdrop($event)" [@fadeAnimation]>
  <div class="modal-container" [@slideAnimation]>
    <div class="modal-logo">
      <svg xmlns="http://www.w3.org/2000/svg" width="119" height="95" viewBox="0 0 119 95" fill="none">
        <!-- SVG content -->
      </svg>
    </div>

    <div class="modal-header">
      <h2 class="modal-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15M10 17L15 12M15 12L10 7M15 12H3" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Log in to Textile Inquiry Tool
      </h2>
    </div>

    <div class="modal-content">
      <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
        <div class="form-group">
          <label [for]="usernameId">Username or Email <span class="required">(Required)</span></label>
          <input
            type="text"
            [id]="usernameId"
            name="username"
            [(ngModel)]="username"
            required
            class="form-control"
            placeholder="user@example.com"
            autocomplete="email">
        </div>

        <div class="form-group">
          <label [for]="passwordId">Password <span class="required">(Required)</span></label>
          <div class="password-input-wrapper">
            <input
              [type]="showPassword ? 'text' : 'password'"
              [id]="passwordId"
              name="password"
              [(ngModel)]="password"
              required
              class="form-control"
              placeholder="Enter your password"
              autocomplete="current-password">
            <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path *ngIf="!showPassword" d="M9.99996 11.6667C10.9205 11.6667 11.6666 10.9205 11.6666 10C11.6666 9.07952 10.9205 8.33333 9.99996 8.33333C9.07944 8.33333 8.33329 9.07952 8.33329 10C8.33329 10.9205 9.07944 11.6667 9.99996 11.6667Z" stroke="#71717A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path *ngIf="!showPassword" d="M17.5 10C15.8693 13.0975 13.1693 15 10 15C6.83067 15 4.13067 13.0975 2.5 10C4.13067 6.9025 6.83067 5 10 5C13.1693 5 15.8693 6.9025 17.5 10Z" stroke="#71717A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path *ngIf="showPassword" d="M3.33329 3.33334L16.6666 16.6667M12.0758 12.0833C11.4796 12.63 10.7144 12.9067 9.93942 12.845C9.16444 12.7834 8.44574 12.3881 7.93829 11.7467C7.43085 11.1053 7.1729 10.2787 7.21309 9.44334C7.25328 8.60795 7.58835 7.82159 8.15829 7.24167M15.775 15.775C14.3285 16.9215 12.5142 17.5396 10.6666 17.5C5.83329 17.5 2.08329 14.1667 1.66663 10C1.86273 8.91985 2.26786 7.89508 2.85829 7L15.775 15.775Z" stroke="#71717A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>

        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>

        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" [id]="rememberMeId" [(ngModel)]="rememberMe" name="rememberMe">
            <label [for]="rememberMeId">Remember me</label>
          </div>
          <a href="javascript:void(0)" class="reset-password" (click)="resetPassword()">Reset password</a>
        </div>

        <button type="submit" class="login-button" [disabled]="isLoading">
          <span *ngIf="isLoading">Logging in...</span>
          <span *ngIf="!isLoading">
                Log in
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M6 12L10 8L6 4" stroke="white" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
        </button>
      </form>
    </div>
  </div>
</div>
